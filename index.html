<html>
<head>
	<script src="https://cdn.firebase.com/js/client/2.0.4/firebase.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
	<script src="http://code.highcharts.com/highcharts.js"></script>

</head>

<body>
	<div id="container" style="width:100%; height:400px;"></div>
</body>

<script type="text/javascript">
	/*
	fetch data from firebase, using callback to achieve realtime updates
	*/
	tempDataRef = new Firebase('https://gen-homework.firebaseio.com/');
	tempDataRef = tempDataRef.child('server-temperature').child('home');

	
	
	//function to update ui

	/*
	create dynamic zoomable timeseries graph using data from firebase
	it should be able to update itself without reloading the page
	*/
	var initGraph = function (dataStore) {
	    $('#container').highcharts({
	        chart: {
	            zoomTtype: 'x'
	        },
	        title: {
	            text: 'Temperature of different locations throughout the day'
	        },
	        subtitle: {
	        	text: 'Click and drag in the plot area to zoom in'
	        },
	        xAxis: {
	        	type: 'datetime',
	            text: 'Time'
	        },
	        yAxis: {
	            title: {
	                text: 'Temperature' //dynamic change needed
	            }
	        },
		    series: [{
		    	type: 'line',
		        name: 'time',    //dynamic needed
		        data: []
		    }]
	    });

	    dataStore.on('child_added',function(snapshot){
		var newTime = snapshot.val();
		var chart = $('#container').highcharts();
		chart.series[0].addPoint([newTime, newTime.Temperature],true,false,true);
		});
	};	

	initGraph(tempDataRef);
	

</script>

</html>